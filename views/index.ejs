<!DOCTYPE html>
<html lang="en">
  <%- include('./layout/head'); %>
  <body>
    <div class="container">
      <h1>Testing Leaflet Map</h1>
      <div class="layout">
        <div id="map"></div>
        <div class="list">
          <% if (data.length > 0) { %> 
            <% data.forEach(pom => { %>
              <h3><%= pom.name %></h3>
              <p><%= pom.address %></p>
            <% }) %> 
          <% } else { %>
            <p>Data Pom Kosong...</p>
          <% } %>
        </div>
      </div>
    </div>
    <script>
      const map = L.map("map").setView(
        [-7.263013225873337, 112.75422315732179],
        12.5
      );

      const tiles = L.tileLayer(
        "https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw",
        {
          maxZoom: 18,
          attribution:
            'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, ' +
            'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
          id: "mapbox/streets-v11",
          tileSize: 512,
          zoomOffset: -1,
        }
      ).addTo(map);

      const onMapClick = (e) => {
        popup
          .setLatLng(e.latlng)
          .setContent("You clicked the map at " + e.latlng.toString())
          .openOn(map);
      };

      map.on("click", onMapClick);
    </script>
  </body>
</html>
